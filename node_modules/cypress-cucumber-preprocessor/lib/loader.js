const log = require("debug")("cypress:cucumber");
exports.log = log;
const jsStringEscape = require("js-string-escape");
const { cucumberTemplate } = require("./cucumberTemplate");

// This is the template for the file that we will send back to cypress instead of the text of a
// feature file
const createCucumber = (filePath, cucumberJson, spec, toRequire, name) =>
  `
  ${cucumberTemplate}

  window.cucumberJson = ${JSON.stringify(cucumberJson)};
  describe(\`${name}\`, function() {
    ${toRequire.join("\n")}
    createTestsFromFeature('${filePath}', '${jsStringEscape(spec)}');
  });
  `;
exports.createCucumber = createCucumber;